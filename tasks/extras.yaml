---
# extras task

- name: copy tab9 script
  copy:
    src: files/tab9_ansible.zsh
    dest: ~/
    owner: "{{ ansible_user_id }}"
    mode: '0777'

- name: run tab9 script
  shell: |
    ./tab9_ansible.zsh
    rm ~/tab9_ansible.zsh
  args:
    chdir: ~/
    executable: "{{ zsh_exe }}"

- name: install or update lua lsp mac
  shell: |
    git pull
    git submodule update --init --recursive
    cd 3rd/luamake
    ninja -f ninja/macos.ninja
    cd ../..
    ./3rd/luamake/luamake rebuild
  args:
    chdir: "{{ gits_dir }}/lua-language-server"
    executable: "{{ zsh_exe }}"
  when: (lsp_lua_mac is defined) and lsp_lua_mac

- name: install or update lua lsp lx
  shell: |
    git pull
    git submodule update --init --recursive
    cd 3rd/luamake
    ninja -f ninja/linux.ninja
    cd ../..
    ./3rd/luamake/luamake rebuild
  args:
    chdir: "{{ gits_dir }}/lua-language-server"
    executable: "{{ zsh_exe }}"
  when: (lsp_lua_lx is defined) and lsp_lua_lx

...
